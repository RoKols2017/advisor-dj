---
title: "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é Print Advisor"
type: guide
status: draft
last_verified: "2026-02-18"
verified_against_commit: "latest"
owner: "@rom"
---

# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é Print Advisor

## üèóÔ∏è **–ß—Ç–æ —Ç–∞–∫–æ–µ –¥–µ–ø–ª–æ–π –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?**

**–î–µ–ø–ª–æ–π** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è —Ç–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –í —Ç–≤–æ—ë–º —Å–ª—É—á–∞–µ —ç—Ç–æ Django-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–µ—á–∞—Ç–∏.

## üìÅ **–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –¥–µ–ø–ª–æ–µ–º:**

### 1. **Dockerfile** ‚Äî "—Ä–µ—Ü–µ–ø—Ç" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
### 2. **Dockerfile.watcher** ‚Äî "—Ä–µ—Ü–µ–ø—Ç" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞ –¥–µ–º–æ–Ω–∞-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è
### 3. **docker-compose.yml** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
### 4. **docker-compose.prod.yml** ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
### 5. **Makefile** ‚Äî –∫–æ–º–∞–Ω–¥—ã-—Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
### 6. **scripts/smoke.sh** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

## üîß **–ü–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–ø–ª–æ—è:**

### **–®–ê–ì 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**

#### **1.1 –°–æ–∑–¥–∞–Ω–∏–µ .env.prod —Ñ–∞–π–ª–∞**
```bash
# –ö–æ–ø–∏—Ä—É–µ–º —à–∞–±–ª–æ–Ω –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–¥ —Å–µ–±—è
cp .env.prod.template .env.prod
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Å–µ–∫—Ä–µ—Ç—ã, –ø–∞—Ä–æ–ª–∏, –ø—É—Ç–∏
nano .env.prod
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –°–æ–∑–¥–∞—ë—Ç—Å—è —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).

#### **1.2 –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤**
```bash
make build
# –∏–ª–∏
docker compose build
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Docker —á–∏—Ç–∞–µ—Ç `Dockerfile` –∏ `Dockerfile.watcher`
- –°–æ–∑–¥–∞—ë—Ç –¥–≤–∞ –æ–±—Ä–∞–∑–∞: `advisor-web` –∏ `advisor-watcher`
- –í –∫–∞–∂–¥–æ–º –æ–±—Ä–∞–∑–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è Python, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∫–æ–¥

**–î–µ—Ç–∞–ª–∏ Dockerfile:**
```dockerfile
# –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ Python 3.13
FROM python:3.13-slim

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
RUN apt-get update && apt-get install -y build-essential libpq-dev curl

# –°–æ–∑–¥–∞—ë–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
RUN groupadd -r appuser && useradd -r -g appuser appuser

# –ö–æ–ø–∏—Ä—É–µ–º –∫–æ–¥ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .

# –°–æ–±–∏—Ä–∞–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã Django
RUN python manage.py collectstatic --noinput

# –ó–∞–ø—É—Å–∫–∞–µ–º –æ—Ç –∏–º–µ–Ω–∏ –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ root)
USER appuser
```

### **–®–ê–ì 2: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤**

#### **2.1 –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤**
```bash
make up
# –∏–ª–∏
docker compose -f docker-compose.prod.yml up -d
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL):**
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `advisor-db`
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
   - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –ø–∞—Ä–æ–ª—å

2. **–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `advisor-web`
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è Gunicorn (–≤–µ–±-—Å–µ—Ä–≤–µ—Ä)
   - –ñ–¥—ë—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

3. **–î–µ–º–æ–Ω-–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å:**
   - –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `advisor-watcher`
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–∞–π–ª–æ–≤
   - –ñ–¥—ë—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### **2.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (depends_on)**
```yaml
web:
  depends_on:
    db:
      condition: service_healthy  # –ñ–¥—ë–º, –ø–æ–∫–∞ –ë–î –Ω–µ —Å—Ç–∞–Ω–µ—Ç –∑–¥–æ—Ä–æ–≤–æ–π

watcher:
  depends_on:
    web:
      condition: service_healthy  # –ñ–¥—ë–º, –ø–æ–∫–∞ –≤–µ–± –Ω–µ —Å—Ç–∞–Ω–µ—Ç –∑–¥–æ—Ä–æ–≤—ã–º
    db:
      condition: service_healthy
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** Docker Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥—ë—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Å–ª–µ–¥—É—é—â–∏—Ö.

### **–®–ê–ì 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**

#### **3.1 –ú–∏–≥—Ä–∞—Ü–∏–∏**
```bash
make migrate
# –∏–ª–∏
docker compose exec web python manage.py migrate
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Django —Å–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î)
- –°–æ–∑–¥–∞—ë—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

#### **3.2 –°–±–æ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤**
```bash
make collectstatic
# –∏–ª–∏
docker compose exec web python manage.py collectstatic --noinput
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- Django —Å–æ–±–∏—Ä–∞–µ—Ç CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ–¥–Ω—É –ø–∞–ø–∫—É
- –ì–æ—Ç–æ–≤–∏—Ç —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º

### **–®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (Smoke Tests)**

#### **4.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏**
```bash
make smoke
# –∏–ª–∏
./scripts/smoke.sh
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ smoke.sh:**
1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤:**
   ```bash
   docker compose exec -T web curl -f -s http://localhost:8000/health/
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:**
   ```bash
   docker compose exec -T web curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/
   docker compose exec -T web curl -s -o /dev/null -w "%{http_code}" http://localhost:8000/admin/login/
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Django:**
   ```bash
   docker compose exec web python manage.py check --deploy
   docker compose exec web python manage.py migrate --check
   ```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–º–æ–Ω–∞:**
   ```bash
   docker compose exec watcher pgrep -f "printing.print_events_watcher"
   ```

---

## üîÑ **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –≤ Makefile:**

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```makefile
build:        # –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑—ã
up:           # –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Ñ–æ–Ω–µ
down:         # –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
logs:         # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
smoke:        # –ó–∞–ø—É—Å–∫–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
migrate:      # –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
clean:        # –£–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –¥–∞–Ω–Ω—ã–µ
```

### **–ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—ã `make up`:**
```bash
make up
# ‚Üì –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:
docker compose up -d
# ‚Üì –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
# 1. –ß–∏—Ç–∞–µ—Ç—Å—è docker-compose.yml
# 2. –°–æ–∑–¥–∞—é—Ç—Å—è/–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
# 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Å–µ—Ç—å –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
# 4. –ú–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è —Ç–æ–º–∞ (–ø–∞–ø–∫–∏)
# 5. –ü—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è health checks
```

---

## üåê **–°–µ—Ç–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

### **–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å Docker:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   advisor-web   ‚îÇ    ‚îÇ  advisor-watcher‚îÇ    ‚îÇ   advisor-db    ‚îÇ
‚îÇ   (–ø–æ—Ä—Ç 8000)   ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (–¥–µ–º–æ–Ω)       ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (–ø–æ—Ä—Ç 5432)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                 ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ advisor-network ‚îÇ
                    ‚îÇ   (bridge)      ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **–í–Ω–µ—à–Ω–∏–µ –ø–æ—Ä—Ç—ã:**
- **80** ‚Äî –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ Nginx reverse proxy
- **5432** ‚Äî –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Docker)

---

## üìÇ **–¢–æ–º–∞ (Volumes) ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ:**

### **–ß—Ç–æ —Ç–∞–∫–æ–µ —Ç–æ–º–∞:**
```yaml
volumes:
  pgdata:    # –î–∞–Ω–Ω—ã–µ PostgreSQL
  logs:      # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  data:      # –§–∞–π–ª—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
```

### **–ó–∞—á–µ–º –Ω—É–∂–Ω—ã:**
- **pgdata** ‚Äî –¥–∞–Ω–Ω—ã–µ –ë–î –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ
- **logs** ‚Äî –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **data** ‚Äî —Ñ–∞–π–ª—ã –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ (watch/processed/quarantine)

---

## üîç **Health Checks ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è:**

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç:**
```yaml
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:8000/health/"]
  interval: 30s    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
  timeout: 10s     # –ñ–¥—ë–º –æ—Ç–≤–µ—Ç–∞ 10 —Å–µ–∫—É–Ω–¥
  retries: 3       # 3 –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–¥ "unhealthy"
  start_period: 40s # –î–∞—ë–º 40 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—É—Å–∫
```

### **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:**
- **Web:** –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å `/health/` endpoint
- **Watcher:** –∑–∞–ø—É—â–µ–Ω –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–º–æ–Ω–∞
- **DB:** –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å PostgreSQL

---

## üöÄ **–ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è (–∫–æ–º–∞–Ω–¥—ã):**

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
cp .env.prod.template .env.prod
nano .env.prod  # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–µ–∫—Ä–µ—Ç—ã

# 2. –°–±–æ—Ä–∫–∞
make build

# 3. –ó–∞–ø—É—Å–∫
make up
make nginx-up

# 4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
make migrate
make collectstatic

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞
make smoke

# 6. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
make logs
make health
```

---

## üõ†Ô∏è **–û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º:**

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:**
```bash
make status        # –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
make health        # –ó–¥–æ—Ä–æ–≤—å–µ —Å–µ—Ä–≤–∏—Å–æ–≤
make logs-web      # –õ–æ–≥–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make logs-watcher  # –õ–æ–≥–∏ –¥–µ–º–æ–Ω–∞
make logs-db       # –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

### **–í—Ö–æ–¥ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:**
```bash
docker compose exec web bash      # –í –≤–µ–±-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose exec watcher bash  # –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–µ–º–æ–Ω–∞
docker compose exec db psql -U advisor -d advisor  # –í –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
```

---

## üìã **–†–µ–∑—é–º–µ –¥–ª—è –Ω–æ–≤–∏—á–∫–∞:**

1. **Docker** ‚Äî —É–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ "–∫–æ—Ä–æ–±–∫–∏" (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
2. **Docker Compose** ‚Äî —É–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∫–∞–∫ –µ–¥–∏–Ω—ã–º —Ü–µ–ª—ã–º
3. **Makefile** ‚Äî —É–ø—Ä–æ—â–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã (–≤–º–µ—Å—Ç–æ –¥–ª–∏–Ω–Ω—ã—Ö docker compose –∫–æ–º–∞–Ω–¥)
4. **Health Checks** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç
5. **Volumes** ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏
6. **Smoke Tests** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

–≠—Ç–æ –∫–∞–∫ **–æ—Ä–∫–µ—Å—Ç—Ä**: –∫–∞–∂–¥—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) –∏–≥—Ä–∞–µ—Ç —Å–≤–æ—é –ø–∞—Ä—Ç–∏—é, –∞ –¥–∏—Ä–∏–∂—ë—Ä (Docker Compose) —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Å–µ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º!

---

## üìö **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**

- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose Documentation](https://docs.docker.com/compose/)
- [Django Deployment Checklist](https://docs.djangoproject.com/en/stable/howto/deployment/checklist/)
- [Gunicorn Configuration](https://docs.gunicorn.org/en/stable/configure.html)

---

*–°–æ–∑–¥–∞–Ω–æ: $(date)*  
*–í–µ—Ä—Å–∏—è: 1.0*
